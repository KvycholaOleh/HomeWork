package zoo;

import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.ObjectOutputStream;
import java.io.OutputStream;
import java.util.ArrayList;
import java.util.List;
import java.util.Map.Entry;
import java.util.Scanner;



public class Controller {
	Zooclub zo = new Zooclub();
	final Scanner sc = new Scanner(System.in);
		
	public void addPerson(){
		System.out.println("Enter name");
		String name = sc.next();
		System.out.println("Enter age");
		int age = sc.nextInt();
		System.out.println("Enter 1 to male 2 to female");
		Gender gender = sc.nextInt()==1 ? Gender.MALE : Gender.FEMALE;
		zo.map.put(new Person(age, name, gender), new ArrayList());
		
	}
	
	public void addPetToMember(){
		System.out.println("Enter member to add pet");
		String nameMemeber = sc.next();
		for(Entry<Person,List<Pet>> entry : zo.set){
			Person person = entry.getKey();
				if (person.getName().equals(nameMemeber)) {
					System.out.println("Enter name");
					String name = sc.next();
					System.out.println("Enter age");
					int age = sc.nextInt();
					System.out.println("Enter kind of animal");
					String kindAnimal = sc.next();
					System.out.println("Enter 1 to male 2 to female");
					Gender gender = sc.nextInt()==1 ? Gender.MALE : Gender.FEMALE;
					zo.map.get(person).add(new Pet(name, kindAnimal, age, gender));
				}
		}
	}
	
	public void deletePetFromMember(){
		System.out.println("Enter member name");
		String memberName = sc.next();
		
		for(Entry<Person,List<Pet>> entry : zo.set){
			Person person = entry.getKey();
			if (person.getName().equals(memberName)) {
				System.out.println("Enter pet name");
				String petName = sc.next();
				zo.map.get(person).removeIf(p -> p.getName().equals(petName));
			}
			}
	}
	
	
	public void deletePetFromAllMembers(){
		System.out.println("Enter type of pet to remove");
		String petName = sc.next();
		
		for(Entry<Person,List<Pet>> entry : zo.set){
			Person person = entry.getKey();
				zo.map.get(person).removeIf(p -> p.getKindAnimal().equals(petName));
			
			}
	}
	
	
	
	public void deleteMember(){
		System.out.println("Enter member name");
		String memberName = sc.next();
		for(Entry<Person,List<Pet>> entry : zo.set){
			Person person = entry.getKey();
			if (person.getName().equals(memberName)) {
				zo.map.remove(person);
			}
		}
	}
	
	public void showAll(){
		for(Entry<Person,List<Pet>> entry : zo.set){
			Person person = entry.getKey();
			System.out.print(person+" -> ");
			for(Pet pet : entry.getValue()){
				System.out.print(pet+" ");
			}
			System.out.println();
		}
		for (Pet pet : zo.list) {
			System.out.println(pet);
		}
	}
	
	public void saveToTextFile(String fileName){
		try (OutputStream os = new FileOutputStream(new File("collection.zoo"));ObjectOutputStream oos = new ObjectOutputStream(os)) {
			oos.writeObject(zo.map);
			oos.flush();
		} catch (IOException e) {
		}
	}
	
	
}
